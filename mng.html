<table id="routes"><thead><tr>
  <th>ID</th><th>名前</th><th>由来</th><th>距離(km)</th>
</tr></thead><tbody></tbody></table>

<script type="module">
  (async () => {
    const { data, error } = await supabase
      .from('routes')
      .select('id,name,origin,distance_m,imported_at,created_at')
      .order('created_at', { ascending:false });
    if (error) { console.error(error); return; }

    const tbody = document.querySelector('#routes tbody');
    tbody.innerHTML = data.map(r => `
      <tr>
        <td>${r.id}</td>
        <td>${r.name ?? ''}</td>
        <td>${r.origin}</td>
        <td>${r.distance_m ? (Number(r.distance_m)/1000).toFixed(1) : '-'}</td>
      </tr>
    `).join('');
  })();
</script>
